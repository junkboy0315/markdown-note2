# Software Design 202309

## AWS のクラウドセキュリティ

- クラウドセキュリティとは
  - 以下の集合体
    - セキュリティポリシー
    - ベストプラクティス
    - テクノロジー
  - クラウド環境内のアプリケーション、データ、その他リソースを保護するためのもの
- 責任共有モデル
  - クラウド**の**セキュリティは AWS が担保する
  - クラウド**内の**セキュリティはユーザーが担保する
- Iaas, Paas, Saas の順に、ユーザーの責任範囲は軽くなる
- 代表的なセキュリティ事故要因
  - 公開された静的かつ長期間有効なクラウド認証情報
  - 認証無しでインターネットに公開されている Elasicsearch インスタンス
  - 認証無しでパブリックからアクセスできるデータストレージサービス

## SRE プラクティス: Renovate による依存関係の更新

- なぜ依存関係を更新するのか
  - セキュリティ
  - 対応コスト
    - ちょくちょく対応していれば 1 回あたりのコストは下がる
    - 副次的に情報のキャッチアップにもなる
- ツール
  - Dependabot
  - Renovate
    - auto merge, PR のグルーピング、正規表現による更新ルールなどが魅力的
- しくみ
  - コード(e.g. `package.json`)を監視しバージョンを確認
  - ルールに従って最新かどうか判定する
  - 古ければ PR を作成する
- 設定
  - 設定ファイル
    - スケジュール、レビュアー、PR のラベル、タイムゾーンなど
    - json5 でも書けるので補完が効く
  - マネージャー
    - 言語やツールごとの処理が定義されたモジュール
    - npm, terraform などの種類がある
    - 正規表現で振る舞いを定義できる regex manager というのもある
- 組み込み方法はいくつかある
  - Github App で実行 (簡単、コンソールも使える、セキュリティ的なリスクは微増)
  - Github Actions などで実行
  - ローカル実行

以下、応用編

- こんなこともできる
  - リポジトリをまたいで設定を共有する
  - 設定ファイルの検証をする
  - Github でのオートマージする
  - 正規表現で更新ルールを独自定義する
- 運用の工夫
  - PR をマージするための時間を確保しておく
  - CI 関連ライブラリの patch, minor 更新はオートマージする
    - Test, Lint, 静的解析の類
    - CD が絡むものはだめ

# Software Design 202310

## ネットワークセキュリティ

### 基本

- ネットワークセキュリティとは防衛策のこと
  - for
    - 情報資産の保護
    - 安全運用の維持
- オープンネットワーク or クローズドネットワーク
  - 外部と繋がっているか、閉鎖されているかで対策は変わる

#### 情報セキュリティの 3 要素 + 4 要素

すべての項目で対策が必要

| 主要 | 要素       | 英語での表現    | 説明                                         |
| ---- | ---------- | --------------- | -------------------------------------------- |
| \*   | 気密性     | Confidentiality | アクセスが制限されている                     |
| \*   | 完全性     | Integrity       | 情報が書き換えられたり過不足があったりしない |
| \*   | 可用性     | Availability    | 必要な人がいつでも使えること                 |
|      | 真正性     | Authenticity    | 本当にその人かどうか                         |
|      | 責任追及性 | Accountability  | 誰が何をしたかを追跡できる                   |
|      | 否認防止   | Non-repudiation | 言い逃れを防げる                             |
|      | 信頼性     | Reliability     | 何があっても変なことにならない               |

#### サイバーキルチェーン

攻撃者が攻撃を行うまでの一連の流れで、以下の 7 段階がある。

| 段階 | 名称              | 説明                                                 |
| ---- | ----------------- | ---------------------------------------------------- |
| 1    | 偵察              | ターゲットの調査を行う段階                           |
| 2    | 武器化            | マルウェアの選定 or 開発                             |
| 3    | デリバリー        | マルウェアをターゲットに送り込む                     |
| 4    | エクスプロイト    | マルウェアが実行される                               |
| 5    | インストール      | マルウェアにより本丸のマルウェアがインストールされる |
| 6    | Command & Control | ターゲットのシステムを外部から遠隔操作する           |
| 7    | 目的実行          | 攻撃の目標を達成する                                 |

- 偵察の例
  - ポートスキャン
    - 動いているサービスを推測する
  - フィンガープリンティング、脆弱性スキャン
    - 特殊パケットを送り込み、その返信を分析して、OS やミドルウェアの種類やバージョンを特定する
- デリバリー・エクスプロイト・インストールの例
  - SQL インジェクション攻撃
  - XSS 攻撃
  - クロスサイトリクエストフォージェリ(CSRF)攻撃
    - 攻撃用の偽サイトを用意し、正規サイトに対してユーザーが意図していない操作を行わせる
  - ディレクトリトラバーサル攻撃
    - ディレクトリの階層を上がって、本来アクセスできないファイルを読み込む
  - DDoS 攻撃
  - ARP スプーフィング攻撃
    - ARP 応答を偽装することでユーザーからの通信を自分に向けさせる
  - セッションハイジャック攻撃
    - 前述の方法などによりセッション ID を盗み、その ID を使って攻撃を行う
    - 深刻な被害をもたらすため絶対に防がなければならない
- C&C の例
  - ボットやボットネットワークを使い、外部から遠隔操作を行う
  - ここまで来ると被害者は同時に加害者にもなりえる

#### 対策

- 「ネットワーク層で多層のロジックを用いて監視すること」が基本
- 3 つに分けて対策する
  - 入口
    - メールフィルタリング
    - Firewall
    - IPS
    - WAF
    - サンドボックスの活用
  - 内部
    - ログ監視
    - データの暗号化
    - セキュリティソフト
    - EDR / Endpoint Detection and Response / エンドポイントの不審な挙動の検知
    - IDS / 不正侵入検知
  - 出口
    - Firewall
    - IPS
    - プロキシサーバによるフィルタリングやブロック

## Go 言語のエラー処理 (前編)

- 原則は"Errores are value. Don't panic."
- Go では、異常系を通常発生するものととらえ、その際に出てきたエラー変数の処理の仕方は開発者がきちんと責任を持って考えるべきだ、という思想になっている
- 「エラーは値である」というのが基本的な考え方
  - 値であるがゆえに、エラーを使った柔軟なプログラミングが可能
- try / catch がない理由
  - ネストを浅く保つことで、正常系の処理を視覚的に明確にするため
  - 発生するエラーがきちんと処理されているか明確にするため
  - どこで関数が return されているか明確にするため
- panic はエラー処理に使うものではない
  - 起こってはならない回復不可能な事象に使うもの
    - 初期化段階での致命的な失敗や、nil 参照など
- recover の使いどころ
  - ごく一部の失敗でプログラム全体が終了するのを防ぐために使う。例えば：
    - Web サーバーの一部のリクエストでエラーが発生しても、他のリクエストは処理を続ける、とか
    - 一つのゴルーチンで panic が発生しても、他のゴルーチンは処理を続ける、とか
